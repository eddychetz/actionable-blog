{
  "hash": "f803d779d59cca0b67c52129ff458575",
  "result": {
    "markdown": "---\ntitle: \"Correlation Analysis with R\"\nauthor: \"Eddwin Cheteni\"\ndate: \"2023-01-21\"\ncategories: [problem-solving, code, correlation, analysis]\nimage: \"image.jpg\"\n---\n\n\n::: {.callout-note appearance=\"simple\"}\n## Build your problem-solving skills\n:::\n\n::: {.callout-important appearance=\"minimal\"}\n### Correlation analysis using `correlationfunnel` package in 10 minutes.\n:::\n\nFor a Data Science team to build a good model, in-depth correlation analysis maybe the best tool to consider. This article is mainly focused on the use of `correlationfunnel` library to perform Correlation Analysis of the available data provided.\n\nImport the important libraries to perform correlation analysis.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) # for data wrangling\nlibrary(correlationfunnel) # for correlation analysis\nlibrary(DT)\nlibrary(DataExplorer)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- read_csv(\"./train.csv\")%>%\n  mutate_if(is.character, as_factor)%>%\n  select(-Loan_ID)%>%\n  mutate(Credit_History = as_factor(Credit_History))%>%\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 614\nColumns: 12\n$ Gender            <fct> Male, Male, Male, Male, Male, Male, Male, Male, Male…\n$ Married           <fct> No, Yes, Yes, Yes, No, Yes, Yes, Yes, Yes, Yes, Yes,…\n$ Dependents        <fct> 0, 1, 0, 0, 0, 2, 0, 3+, 2, 1, 2, 2, 2, 0, 2, 0, 1, …\n$ Education         <fct> Graduate, Graduate, Graduate, Not Graduate, Graduate…\n$ Self_Employed     <fct> No, No, Yes, No, No, Yes, No, No, No, No, No, NA, No…\n$ ApplicantIncome   <dbl> 5849, 4583, 3000, 2583, 6000, 5417, 2333, 3036, 4006…\n$ CoapplicantIncome <dbl> 0, 1508, 0, 2358, 0, 4196, 1516, 2504, 1526, 10968, …\n$ LoanAmount        <dbl> NA, 128, 66, 120, 141, 267, 95, 158, 168, 349, 70, 1…\n$ Loan_Amount_Term  <dbl> 360, 360, 360, 360, 360, 360, 360, 360, 360, 360, 36…\n$ Credit_History    <fct> 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, NA, …\n$ Property_Area     <fct> Urban, Rural, Urban, Urban, Urban, Urban, Urban, Sem…\n$ Loan_Status       <fct> Y, N, Y, Y, Y, Y, Y, N, Y, N, Y, Y, Y, N, Y, Y, Y, N…\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\nskim_without_charts(data)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |     |\n|:------------------------|:----|\n|Name                     |data |\n|Number of rows           |614  |\n|Number of columns        |12   |\n|_______________________  |     |\n|Column type frequency:   |     |\n|factor                   |8    |\n|numeric                  |4    |\n|________________________ |     |\n|Group variables          |None |\n\n\n**Variable type: factor**\n\n|skim_variable  | n_missing| complete_rate|ordered | n_unique|top_counts                     |\n|:--------------|---------:|-------------:|:-------|--------:|:------------------------------|\n|Gender         |        13|          0.98|FALSE   |        2|Mal: 489, Fem: 112             |\n|Married        |         3|          1.00|FALSE   |        2|Yes: 398, No: 213              |\n|Dependents     |        15|          0.98|FALSE   |        4|0: 345, 1: 102, 2: 101, 3+: 51 |\n|Education      |         0|          1.00|FALSE   |        2|Gra: 480, Not: 134             |\n|Self_Employed  |        32|          0.95|FALSE   |        2|No: 500, Yes: 82               |\n|Credit_History |        50|          0.92|FALSE   |        2|1: 475, 0: 89                  |\n|Property_Area  |         0|          1.00|FALSE   |        3|Sem: 233, Urb: 202, Rur: 179   |\n|Loan_Status    |         0|          1.00|FALSE   |        2|Y: 422, N: 192                 |\n\n\n**Variable type: numeric**\n\n|skim_variable     | n_missing| complete_rate|    mean|      sd|  p0|    p25|    p50|     p75|  p100|\n|:-----------------|---------:|-------------:|-------:|-------:|---:|------:|------:|-------:|-----:|\n|ApplicantIncome   |         0|          1.00| 5403.46| 6109.04| 150| 2877.5| 3812.5| 5795.00| 81000|\n|CoapplicantIncome |         0|          1.00| 1621.25| 2926.25|   0|    0.0| 1188.5| 2297.25| 41667|\n|LoanAmount        |        22|          0.96|  146.41|   85.59|   9|  100.0|  128.0|  168.00|   700|\n|Loan_Amount_Term  |        14|          0.98|  342.00|   65.12|  12|  360.0|  360.0|  360.00|   480|\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata%>%\n  na.omit()%>%\n  binarize()%>%\n  correlate(target = Loan_Status__Y)%>%\n  plot_correlation_funnel(interactive = TRUE)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-12a5357afafab4f0d10c\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-12a5357afafab4f0d10c\">{\"x\":{\"data\":[{\"x\":[0,0],\"y\":[0.4,12.6],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(255,0,0,1)\",\"dash\":\"dash\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1,-1,-0.529389754719164,0.529389754719164,0.155685524978308,0.124249956066913,-0.124249956066913,-0.11232088535577,0.11232088535577,-0.110817132815319,0.0733682827013096,0.0684371971413729,-0.0684371971413729,-0.0659065972476278,0.0645042973595199,-0.0645042973595199,0.0625101750102424,0.0607696170809638,-0.0559637210315496,-0.0403501444638633,-0.0360902663692541,0.0347148324453601,-0.0347148324453601,-0.0312550875051212,0.0239828036250867,-0.022938137045909,-0.0208367250034141,0.0176737638590072,-0.0104183625017071,-0.00578368136653423,0.00320347918457836,0.00240481837440589],\"y\":[12,12,11,11,10,9,9,8,8,10,7,6,6,5,4,4,3,5,10,7,3,2,2,1,1,7,3,1,1,7,5,5],\"text\":[\"Loan_Status<br />Bin: Y<br />Correlation: 1\",\"Loan_Status<br />Bin: N<br />Correlation: -1\",\"Credit_History<br />Bin: 0<br />Correlation: -0.529\",\"Credit_History<br />Bin: 1<br />Correlation: 0.529\",\"Property_Area<br />Bin: Semiurban<br />Correlation: 0.156\",\"Loan_Amount_Term<br />Bin: -Inf_360<br />Correlation: 0.124\",\"Loan_Amount_Term<br />Bin: 360_Inf<br />Correlation: -0.124\",\"Married<br />Bin: No<br />Correlation: -0.112\",\"Married<br />Bin: Yes<br />Correlation: 0.112\",\"Property_Area<br />Bin: Rural<br />Correlation: -0.111\",\"Dependents<br />Bin: 2<br />Correlation: 0.073\",\"Education<br />Bin: Graduate<br />Correlation: 0.068\",\"Education<br />Bin: Not_Graduate<br />Correlation: -0.068\",\"LoanAmount<br />Bin: 170_Inf<br />Correlation: -0.066\",\"Gender<br />Bin: Male<br />Correlation: 0.065\",\"Gender<br />Bin: Female<br />Correlation: -0.065\",\"CoapplicantIncome<br />Bin: 1084.5_2253.25<br />Correlation: 0.063\",\"LoanAmount<br />Bin: 128_170<br />Correlation: 0.061\",\"Property_Area<br />Bin: Urban<br />Correlation: -0.056\",\"Dependents<br />Bin: 1<br />Correlation: -0.04\",\"CoapplicantIncome<br />Bin: -Inf_1084.5<br />Correlation: -0.036\",\"Self_Employed<br />Bin: No<br />Correlation: 0.035\",\"Self_Employed<br />Bin: Yes<br />Correlation: -0.035\",\"ApplicantIncome<br />Bin: 5852.5_Inf<br />Correlation: -0.031\",\"ApplicantIncome<br />Bin: 2898.75_3859<br />Correlation: 0.024\",\"Dependents<br />Bin: 0<br />Correlation: -0.023\",\"CoapplicantIncome<br />Bin: 2253.25_Inf<br />Correlation: -0.021\",\"ApplicantIncome<br />Bin: 3859_5852.5<br />Correlation: 0.018\",\"ApplicantIncome<br />Bin: -Inf_2898.75<br />Correlation: -0.01\",\"Dependents<br />Bin: 3+<br />Correlation: -0.006\",\"LoanAmount<br />Bin: 100_128<br />Correlation: 0.003\",\"LoanAmount<br />Bin: -Inf_100<br />Correlation: 0.002\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(44,62,80,1)\",\"opacity\":1,\"size\":5.66929133858268,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(44,62,80,1)\"}},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":124.931506849315},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Correlation Funnel\",\"font\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-1.1,1.1],\"tickmode\":\"array\",\"ticktext\":[\"-1.0\",\"-0.5\",\"0.0\",\"0.5\",\"1.0\"],\"tickvals\":[-1,-0.5,0,0.5,1],\"categoryorder\":\"array\",\"categoryarray\":[\"-1.0\",\"-0.5\",\"0.0\",\"0.5\",\"1.0\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(204,204,204,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.22139200221392,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(204,204,204,1)\",\"gridwidth\":0.22139200221392,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"correlation\",\"font\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,12.6],\"tickmode\":\"array\",\"ticktext\":[\"ApplicantIncome\",\"Self_Employed\",\"CoapplicantIncome\",\"Gender\",\"LoanAmount\",\"Education\",\"Dependents\",\"Married\",\"Loan_Amount_Term\",\"Property_Area\",\"Credit_History\",\"Loan_Status\"],\"tickvals\":[1,2,3,4,5,6,7,8,9,10,11,12],\"categoryorder\":\"array\",\"categoryarray\":[\"ApplicantIncome\",\"Self_Employed\",\"CoapplicantIncome\",\"Gender\",\"LoanAmount\",\"Education\",\"Dependents\",\"Married\",\"Loan_Amount_Term\",\"Property_Area\",\"Credit_History\",\"Loan_Status\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(204,204,204,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.22139200221392,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(204,204,204,1)\",\"gridwidth\":0.22139200221392,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"feature\",\"font\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":\"transparent\",\"line\":{\"color\":\"rgba(44,62,80,1)\",\"width\":0.33208800332088,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.88976377952756,\"font\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":11.689497716895}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"293c66724a3f\":{\"xintercept\":{},\"type\":\"scatter\"},\"293c554368b6\":{\"x\":{},\"y\":{},\"text\":{}}},\"cur_data\":\"293c66724a3f\",\"visdat\":{\"293c66724a3f\":[\"function (y) \",\"x\"],\"293c554368b6\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.1/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/plotly-binding-4.10.1/plotly.js\"></script>\r\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}