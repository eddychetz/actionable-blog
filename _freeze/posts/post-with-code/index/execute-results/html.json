{
  "hash": "a473fbff08824b1d00a356732f3503d9",
  "result": {
    "markdown": "---\ntitle: \"Correlation Analysis with R\"\nauthor: \"Eddwin Cheteni\"\ndate: \"2023-01-21\"\ncategories: [problem-solving, intermediate, code, correlation]\nimage: \"image.jpg\"\ncode-fold: true\ncode-line-numbers: true\ncode-summary: \"click here to view code\"\n---\n\n\n::: {.callout-note appearance=\"simple\"}\n# Build your problem-solving skills {.callout-note appearance=\"simple\"}\n\nFor a data science team to build a good model, in-depth correlation analysis may be the best tool to consider.\n:::\n\n::: {.callout-tip appearance=\"minimal\"}\n### Import Data\n\nWe need to import data needed for correlation analysis. In this case, we use data for **Home Loan** applicants to perform the analysis.\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ndata <- read_csv(\"./train.csv\")%>%\n  mutate_if(is.character, as_factor)%>%\n  select(-Loan_ID)%>%\n  mutate(Credit_History = as_factor(Credit_History))\n```\n:::\n\n\n::: {.callout-note appearance=\"simple\"}\n## A Quick Summary using `skimr`\n\nYou can perform a quick inspection of your data using `skimr`. This enables you to understand the overview of your data properties, shape, number of missing values, and descriptive summary.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\nskim_without_charts(data)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |     |\n|:------------------------|:----|\n|Name                     |data |\n|Number of rows           |614  |\n|Number of columns        |12   |\n|_______________________  |     |\n|Column type frequency:   |     |\n|factor                   |8    |\n|numeric                  |4    |\n|________________________ |     |\n|Group variables          |None |\n\n\n**Variable type: factor**\n\n|skim_variable  | n_missing| complete_rate|ordered | n_unique|top_counts                     |\n|:--------------|---------:|-------------:|:-------|--------:|:------------------------------|\n|Gender         |        13|          0.98|FALSE   |        2|Mal: 489, Fem: 112             |\n|Married        |         3|          1.00|FALSE   |        2|Yes: 398, No: 213              |\n|Dependents     |        15|          0.98|FALSE   |        4|0: 345, 1: 102, 2: 101, 3+: 51 |\n|Education      |         0|          1.00|FALSE   |        2|Gra: 480, Not: 134             |\n|Self_Employed  |        32|          0.95|FALSE   |        2|No: 500, Yes: 82               |\n|Credit_History |        50|          0.92|FALSE   |        2|1: 475, 0: 89                  |\n|Property_Area  |         0|          1.00|FALSE   |        3|Sem: 233, Urb: 202, Rur: 179   |\n|Loan_Status    |         0|          1.00|FALSE   |        2|Y: 422, N: 192                 |\n\n\n**Variable type: numeric**\n\n|skim_variable     | n_missing| complete_rate|    mean|      sd|  p0|    p25|    p50|     p75|  p100|\n|:-----------------|---------:|-------------:|-------:|-------:|---:|------:|------:|-------:|-----:|\n|ApplicantIncome   |         0|          1.00| 5403.46| 6109.04| 150| 2877.5| 3812.5| 5795.00| 81000|\n|CoapplicantIncome |         0|          1.00| 1621.25| 2926.25|   0|    0.0| 1188.5| 2297.25| 41667|\n|LoanAmount        |        22|          0.96|  146.41|   85.59|   9|  100.0|  128.0|  168.00|   700|\n|Loan_Amount_Term  |        14|          0.98|  342.00|   65.12|  12|  360.0|  360.0|  360.00|   480|\n:::\n:::\n\n::: {.callout-note appearance=\"simple\"}\n## A quick summary using `DataExplorer`\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(DataExplorer)\ndata%>%\n  plot_missing(\n    ggtheme = theme_classic(), \n    theme_config = list(legend.position = c(\"top\")),\n    title = \"Missing value plot showing percentage of missing data points\"\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n::: {.callout-note appearance=\"simple\"}\n## A Quick Summary using `dataxray`\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dataxray)\nlibrary(DT)\nlibrary(gt)\ndata%>%\n  make_xray(by = 'Loan_Status')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 22 × 14\n   Loan_St…¹ ORDER TYPE  VAR   LABEL FORMAT UNITS     n missing disti…² counts…³\n   <fct>     <int> <chr> <chr> <chr> <chr>  <chr> <dbl>   <dbl>   <dbl> <list>  \n 1 Y             1 CHAR  Gend… <NA>  <NA>   <NA>    414       8       2 <tibble>\n 2 Y             2 CHAR  Marr… <NA>  <NA>   <NA>    419       3       2 <tibble>\n 3 Y             3 CHAR  Depe… <NA>  <NA>   <NA>    413       9       4 <tibble>\n 4 Y             4 CHAR  Educ… <NA>  <NA>   <NA>    422       0       2 <tibble>\n 5 Y             5 CHAR  Self… <NA>  <NA>   <NA>    399      23       2 <tibble>\n 6 Y             6 NUM   Appl… <NA>  <NA>   <NA>    422       0     364 <tibble>\n 7 Y             7 NUM   Coap… <NA>  <NA>   <NA>    422       0     215 <tibble>\n 8 Y             8 NUM   Loan… <NA>  <NA>   <NA>    411      11     161 <tibble>\n 9 Y             9 NUM   Loan… <NA>  <NA>   <NA>    414       8       9 <tibble>\n10 Y            10 CHAR  Cred… <NA>  <NA>   <NA>    385      37       2 <tibble>\n# … with 12 more rows, 3 more variables: values_df <list>, extremes_df <list>,\n#   spike_hist <list>, and abbreviated variable names ¹​Loan_Status, ²​distinct,\n#   ³​counts_df\n```\n:::\n:::\n\n::: {.callout-tip appearance=\"minimal\"}\n### Correlation Analysis using `correlationfunnel`.\n\n\nThis section focused on the use of the `correlationfunnel` library to perform **Correlation Analysis** for the available data provided.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(correlationfunnel)\ndata%>%\n  na.omit()%>%\n  binarize(n_bins = 5)%>%\n  correlate(target = Loan_Status__Y)%>%\n  plot_correlation_funnel(interactive = TRUE)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-e826a53b599a492b2a34\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-e826a53b599a492b2a34\">{\"x\":{\"data\":[{\"x\":[0,0],\"y\":[0.4,12.6],\"text\":\"\",\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(255,0,0,1)\",\"dash\":\"dash\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1,-1,-0.529389754719164,0.529389754719164,0.155685524978308,0.124249956066913,-0.124249956066913,-0.11232088535577,0.11232088535577,-0.110817132815319,0.0733682827013096,0.0727514692789498,0.0684371971413729,-0.0684371971413729,0.0645042973595199,-0.0645042973595199,0.0599158396292757,-0.0559637210315496,-0.0496241162577244,0.0406015496654108,-0.0403501444638633,-0.0383459080173325,0.0347148324453601,-0.0347148324453601,-0.022938137045909,-0.0174349354563768,-0.0157894915365487,-0.0157894915365487,-0.0122643951101503,-0.00802023050155658,-0.00578368136653423,-0.00451128329615676,-0.00451128329615676,-0.00370960563008177],\"y\":[12,12,11,11,10,9,9,8,8,10,7,6,5,5,4,4,3,10,6,2,7,3,1,1,7,3,2,2,6,6,7,2,2,6],\"text\":[\"Loan_Status<br />Bin: Y<br />Correlation: 1\",\"Loan_Status<br />Bin: N<br />Correlation: -1\",\"Credit_History<br />Bin: 0<br />Correlation: -0.529\",\"Credit_History<br />Bin: 1<br />Correlation: 0.529\",\"Property_Area<br />Bin: Semiurban<br />Correlation: 0.156\",\"Loan_Amount_Term<br />Bin: -Inf_360<br />Correlation: 0.124\",\"Loan_Amount_Term<br />Bin: 360_Inf<br />Correlation: -0.124\",\"Married<br />Bin: No<br />Correlation: -0.112\",\"Married<br />Bin: Yes<br />Correlation: 0.112\",\"Property_Area<br />Bin: Rural<br />Correlation: -0.111\",\"Dependents<br />Bin: 2<br />Correlation: 0.073\",\"LoanAmount<br />Bin: 115.6_138<br />Correlation: 0.073\",\"Education<br />Bin: Graduate<br />Correlation: 0.068\",\"Education<br />Bin: Not_Graduate<br />Correlation: -0.068\",\"Gender<br />Bin: Male<br />Correlation: 0.065\",\"Gender<br />Bin: Female<br />Correlation: -0.065\",\"CoapplicantIncome<br />Bin: 1666_2500.8<br />Correlation: 0.06\",\"Property_Area<br />Bin: Urban<br />Correlation: -0.056\",\"LoanAmount<br />Bin: 184.2_Inf<br />Correlation: -0.05\",\"ApplicantIncome<br />Bin: 2624_3417.6<br />Correlation: 0.041\",\"Dependents<br />Bin: 1<br />Correlation: -0.04\",\"CoapplicantIncome<br />Bin: 2500.8_Inf<br />Correlation: -0.038\",\"Self_Employed<br />Bin: No<br />Correlation: 0.035\",\"Self_Employed<br />Bin: Yes<br />Correlation: -0.035\",\"Dependents<br />Bin: 0<br />Correlation: -0.023\",\"CoapplicantIncome<br />Bin: -Inf_1666<br />Correlation: -0.017\",\"ApplicantIncome<br />Bin: -Inf_2624<br />Correlation: -0.016\",\"ApplicantIncome<br />Bin: 4351.6_6386.4<br />Correlation: -0.016\",\"LoanAmount<br />Bin: -Inf_95<br />Correlation: -0.012\",\"LoanAmount<br />Bin: 95_115.6<br />Correlation: -0.008\",\"Dependents<br />Bin: 3+<br />Correlation: -0.006\",\"ApplicantIncome<br />Bin: 3417.6_4351.6<br />Correlation: -0.005\",\"ApplicantIncome<br />Bin: 6386.4_Inf<br />Correlation: -0.005\",\"LoanAmount<br />Bin: 138_184.2<br />Correlation: -0.004\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(44,62,80,1)\",\"opacity\":1,\"size\":5.66929133858268,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(44,62,80,1)\"}},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":124.931506849315},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Correlation Funnel\",\"font\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-1.1,1.1],\"tickmode\":\"array\",\"ticktext\":[\"-1.0\",\"-0.5\",\"0.0\",\"0.5\",\"1.0\"],\"tickvals\":[-1,-0.5,0,0.5,1],\"categoryorder\":\"array\",\"categoryarray\":[\"-1.0\",\"-0.5\",\"0.0\",\"0.5\",\"1.0\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(204,204,204,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.22139200221392,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(204,204,204,1)\",\"gridwidth\":0.22139200221392,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"correlation\",\"font\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,12.6],\"tickmode\":\"array\",\"ticktext\":[\"Self_Employed\",\"ApplicantIncome\",\"CoapplicantIncome\",\"Gender\",\"Education\",\"LoanAmount\",\"Dependents\",\"Married\",\"Loan_Amount_Term\",\"Property_Area\",\"Credit_History\",\"Loan_Status\"],\"tickvals\":[1,2,3,4,5,6,7,8,9,10,11,12],\"categoryorder\":\"array\",\"categoryarray\":[\"Self_Employed\",\"ApplicantIncome\",\"CoapplicantIncome\",\"Gender\",\"Education\",\"LoanAmount\",\"Dependents\",\"Married\",\"Loan_Amount_Term\",\"Property_Area\",\"Credit_History\",\"Loan_Status\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(204,204,204,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.22139200221392,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(204,204,204,1)\",\"gridwidth\":0.22139200221392,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"feature\",\"font\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":\"transparent\",\"line\":{\"color\":\"rgba(44,62,80,1)\",\"width\":0.33208800332088,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.88976377952756,\"font\":{\"color\":\"rgba(44,62,80,1)\",\"family\":\"\",\"size\":11.689497716895}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"3f3c551f1be9\":{\"xintercept\":{},\"type\":\"scatter\"},\"3f3c37f0392a\":{\"x\":{},\"y\":{},\"text\":{}}},\"cur_data\":\"3f3c551f1be9\",\"visdat\":{\"3f3c551f1be9\":[\"function (y) \",\"x\"],\"3f3c37f0392a\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.1/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/plotly-binding-4.10.1/plotly.js\"></script>\r\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}